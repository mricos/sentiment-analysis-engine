<html>
  <head>
  </head>
  <body>
    <div id="root"></div>
    <script 
      crossorigin 
      src="https://unpkg.com/react@16/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/babel-standalone@6.26.0/babel.js"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.4/axios.min.js" integrity="sha512-lTLt+W7MrmDfKam+r3D2LURu0F47a3QaW5nF0c6Hl0JDZ57ruei+ovbg7BrZ+0bjVJ5YgzsAWE+RreERbpPE1g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="text/babel">


	    // define command line interface
	    function SaeCmdLine() {
	        
		const [text, setText] = React.useState("");

                // submit entire text string for single analysis
	        async function handleSubmit(e) {

                    e.preventDefault();
                    /*
		    const options = {
			method: "POST",
			body: JSON.stringify({
			    data: text
			}),
			headers: {
			    "Content-Type": "application/json"
			}
		    };
		    */

		    const { data: { sentiment } } = await axios.post(
		        "http://localhost:3000/api/nlp",
			{ data: text }
		    );

		    /*
		    const response = await fetch(
                        "http://localhost:3000/api/nlp", 
		        options
		    );
		    */

		    alert(sentiment);
		    setText("");
		}


		function handleChange(e) {
                    setText(e.target.value);
		}

                const centered = {
                    "position": "fixed",
		    "top": "50%",
		    "left": "50%",
		    "transform": "translate(-50%, -50%)"
		};

                return (
		    <form
		        style={centered}
		        onSubmit={handleSubmit}
		    >
                        <input 
                            type="text"
			    value={text}
			    onChange={handleChange}
			/>
			<input type="submit" value="Analyze" />
		    </form>
		);
	    }

	    const mountPoint = document.getElementById("root");
	    ReactDOM.render(<SaeCmdLine />, mountPoint);

    </script>
  </body>
</html>
